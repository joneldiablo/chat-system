{"version":3,"sources":["../../../src/api/controllers/message-controller.js"],"names":["MessageController","MessageModel","data","console","log","senderId","auth","id","receiverId","messages","query","where","orWhere","limit","orderBy","reverse","Controller"],"mappings":"6oCAGqBA,kB,aAEnB;;KAGA,YAAc,kHACNC,oBADM,EAEb,CAED;;6EAGUC,C,CAAM,CACdC,QAAQC,GAAR,CAAYF,CAAZ,CADc,IAEVG,GAAWH,EAAKI,IAAL,CAAUC,EAFX,CAGVC,EAAaN,EAAKM,UAHR,CAIVC,EAAW,KAAMR,sBAAaS,KAAb,GAClBC,KADkB,CACZ,CAAEN,UAAF,CAAYG,YAAZ,CADY,EAElBI,OAFkB,CAEV,CAAEP,SAAUG,CAAZ,CAAwBA,WAAYH,CAApC,CAFU,EAGlBQ,KAHkB,CAGZ,EAHY,EAIlBC,OAJkB,CAIV,MAJU,CAIF,MAJE,CAJP,CASd,MAAOL,GAASM,OAAT,EACR,C,OAtB4CC,4B,kBAA1BhB,iB","file":"message-controller.js","sourcesContent":["import Controller from \"abstract-controller\";\nimport { MessageModel } from \"../models\";\n\nexport default class MessageController extends Controller {\n\n  /**\n   * \n   */\n  constructor() {\n    super(MessageModel);\n  }\n\n  /**\n   * \n   */\n  async get(data) {\n    console.log(data);\n    let senderId = data.auth.id;\n    let receiverId = data.receiverId;\n    let messages = await MessageModel.query()\n      .where({ senderId, receiverId })\n      .orWhere({ senderId: receiverId, receiverId: senderId })\n      .limit(50)\n      .orderBy('date', 'desc');\n    return messages.reverse();\n  }\n\n}"]}